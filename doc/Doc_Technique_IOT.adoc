= Documentation Technique de l’application (Partie IOT) - La Bonne Note
:icons: font
:models: models
:experimental:
:incremental:
:numbered:
:toc: macro
:window: _blank
:correction!:

// Useful definitions
:asciidoc: http://www.methods.co.nz/asciidoc[AsciiDoc]
:icongit: icon:git[]
:git: http://git-scm.com/[{icongit}]
:plantuml: https://plantuml.com/fr/[plantUML]

ifndef::env-github[:icons: font]
// Specific to GitHub
ifdef::env-github[]
:correction:
:!toc-title:
:caution-caption: :fire:
:important-caption: :exclamation:
:note-caption: :paperclip:
:tip-caption: :bulb:
:warning-caption: :warning:
:icongit: Git
endif::[]

Équipe de développement : Yannis Gibert, Ahmad KHALIL, Rayan SELLOU (Groupe 12)

toc::[]

= Présentation de l'application
== Contexte général
L'entreprise "La Bonne Note", spécialisée dans la vente d'instruments de musique, ambitionne d'améliorer la gestion de son entrepôt par le biais d'une application Java. Cette dernière sera conçue pour optimiser l'accès aux données des capteurs, l'écriture de ces informations dans des fichiers, et pour paramétrer le fonctionnement d'une application Python associée. L'objectif est de permettre une gestion précise et efficace des capteurs déployés à l'IUT, diffusant des données relatives au CO2, à la température et à l'humidité via le bus MQTT.

== Description du besoin
L'application Java de "La Bonne Note" vise à fournir une interface ergonomique et fonctionnelle pour gérer les capteurs et les données qu'ils génèrent. Elle proposera différentes fonctionnalités telles que la configuration des types de données récupérées, la fréquence de lecture des capteurs, les seuils d'alerte, et les noms de fichiers associés. Cette application Java servira également à afficher en temps réel les données captées, différenciées par salle pour offrir une représentation terrain réaliste. Elle permettra également la visualisation graphique des fichiers logs, l'affichage des alertes de dépassement de seuils, tout en mettant l'accent sur une architecture logicielle proposée par les étudiants, justifiée et analysée en profondeur.

== Cas d'utilisation
L'application de "La Bonne Note" propose plusieurs cas d'utilisation essentiels pour optimiser la gestion de son entrepôt. Tout d'abord, elle permet la configuration des capteurs en offrant la possibilité de sélectionner les types de données à récupérer, de définir la fréquence de lecture des capteurs et de fixer les seuils d'alerte pour chaque type de donnée. Ensuite, elle offre une interface conviviale pour afficher en temps réel les données captées par les capteurs, distinguant ces données par salle pour une représentation précise de l'état actuel de l'entrepôt. De plus, elle facilite la visualisation graphique des fichiers logs, permettant aux utilisateurs de consulter l'historique des données captées. Enfin, elle assure une gestion proactive des alertes en affichant en permanence les dépassements de seuils détectés par les capteurs, fournissant ainsi un aperçu immédiat des situations critiques et nécessitant une attention particulière.

image::https://github.com/IUT-Blagnac/sae-3-01-devapp-Groupe-12/blob/master/doc/Notre%20client/Diagrammes/Use%20Case/US_IOT.png[]

= Structure du projet 

== Packages Java
- application : comporte le main permettant de lancer l'application ainsi que la classe qui permet de connaître l'état de l'application
- application.control : contient les contrôleurs et l'accès aux données, regroupés dans le package "application.control", sont responsables de la gestion des fonctionnalités de l'application. Ils traitent les requêtes des utilisateurs et assurent la liaison avec la base de données Oracle via les classes du package "model.orm".
- application.tools : fournit des outils d'aide supplémentaires facilitant ainsi le développement et la maintenance de l'application.
- application.view : contient les vues de l'application, gérée par le package "application.view", est basée sur des fichiers FXML et leurs contrôleurs associés. Chaque page FXML possède sa propre vue, garantissant une interface utilisateur claire et intuitive.

== Fichiers Python
  - connect_linux.py : version Linux du script.
  - connect.py : version Windows du script.

== Fichiers de données 
  - un fichier Json stockant tout l'historique des alertes
  - un fichier Json stockant tout l'historique des données
  - un fichier Json stockant juste les données récupérées en temps réel (fichier qui est remis à vide à chaque lancement)

== Ressources Utilisées

- Maven : Utilisé pour la compilation, la création du JAR, la génération de la JavaDoc et la gestion des dépendances via le fichier pom.xml.

- JDK : Version 17 nécessaire pour l'exécution du projet.

- Fichiers Fichier FXML : Créés avec SceneBuilder pour les vues de l'application.

= Pré-requis pour lancer l'application

Pour exécuter l'application, vérifiez que Java est installé sur votre ordinateur en ouvrant une invite de commande et en saisissant la commande suivante :

- java -version

Si JAVA n'est pas installé, vous pouvez le télécharger depuis https://www.java.com/fr/download/.

Pour que l'application Java puisse exécuter le script Python, assurez-vous d'avoir les bibliothèques requises installées. Voici les bibliothèques nécessaires :

1. `paho.mqtt.client`: Bibliothèque MQTT pour Python.
2. `json`: Module Python pour travailler avec JSON.
3. `configparser`: Module Python pour lire les fichiers de configuration.
4. `os`: Module Python pour des fonctionnalités liées au système d'exploitation.
5. `time` (sous Windows uniquement) : Module Python pour le temps.
6. `datetime`: Module Python pour manipuler les dates et heures.

Vous pouvez installer ces bibliothèques en utilisant `pip`. Ouvrez une invite de commande ou un terminal et saisissez les commandes suivantes :

[source,cmd]
----
pip install paho-mqtt
pip install jsonlib-python3
pip install configparser
pip install datetime
----


Pour lancer l'application :

- Assurez-vous que les fichiers Python (scripts) et les fichiers JSON (alerte.json, données.json, logs.json) sont placés dans le même répertoire que le fichier JAR de l'application.

image::https://github.com/IUT-Blagnac/sae-3-01-devapp-Groupe-12/blob/master/doc/Images%20pour%20la%20documentations/Image_IOT/img_dossier_application.png[]

(En jaunes les fichiers de données JSON, en bleu les script python et en rouge l'exécutable de l'application)

Deux méthodes pour lancer l'application :

- Ouvrez une invite de commande et exécutez la commande suivante : 

[source,cmd]
----
java -jar sae_iot_la_bonne_note.jar
----

- Double-cliquez sur le fichier exécutable (sae_iot_la_bonne_note.jar)

Si vous préférez exécuter le projet à partir d'Eclipse, veuillez installer le JDK 17. De plus, l'installation de JavaFX depuis Eclipse Marketplace est nécessaire (version recommandée : 3.8.0).


= Fonctionnalités développées

== Fonctionnalite x (développé par x x)

Partie du UseCase :

Partie du diagramme de classe : 

Diagramme de séquence : 

Classes utilisées : 

package Application.control :

- ComptesManagement -> la méthode *creerNouveauCompte* appelée par doNouveauCompte (ComptesManagementController)

- CompteEditorPane -> *constructeur de CompteEditorPane* && la méthode *doCompteEditorDialog* appelée par creerNouveauCompte (ComptesManagement)

package Application.view :

- ComptesManagementController -> la méthode *doNouveauCompte* appelée par comptesmanagement.fxml (bouton nouveau compte sur la scène)

- ComptesEditorPaneController -> la méthode *displayDialog* appelée par doCompteEditorDialog (CompteEditorPane)

package Model.orm :

- Access_BD_CompteCourant -> la méthode *addCompte* appelée par creerNouveauCompte (ComptesManagement)
